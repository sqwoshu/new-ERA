    def one(self):
        browser = self.browser
        window_after = browser.window_handles[1]
        browser.switch_to.window(window_after)

        try:
            t = WebDriverWait(browser, 20).until(
                EC.presence_of_element_located((By.XPATH, '//*[@id="hook_Block_AltGroupMainMenu"]/ul/div')))
            if t.text == "Вступить":
                vst = browser.find_element(By.XPATH,'//*[@id="hook_Block_AltGroupMainMenu"]/ul/div/a')
                vst.click()

            time.sleep(2)
            browser.close()
        except Exception:
            time.sleep(2)
            browser.close()

    def two(self):
        browser = self.browser
        window_after = browser.window_handles[1]
        browser.switch_to.window(window_after)

        try:
            t = WebDriverWait(browser, 20).until(
                EC.presence_of_element_located((By.XPATH, '//*[@id="hook_Block_MainMenu"]/div/ul/li[1]')))
            if t.text == "Добавить в друзья":
                pod = browser.find_element(By.XPATH,'//*[@id="hook_Block_MainMenu"]/div/ul/li[1]/a')
                pod.click()

            time.sleep(2)
            browser.close()
        except Exception:
            time.sleep(2)
            browser.close()

    def auto_follow_ok(self):
        browser = self.browser
        time.sleep(2)
        browser.get('https://bosslike.ru/tasks/odnoklassniki/subscribe/')
        window_before = browser.window_handles[0]

        ballans_ok = browser.find_element(By.ID,'user_points_balance').text
        print('ok',ballans_ok)

        title = []

        try:
            count = browser.find_element(By.XPATH,'//*[@id="list-7-3"]/span[1]').text
            if int(count) > 0:
                t = browser.find_elements(By.CSS_SELECTOR, ".media-info-name.text-overflow.text-overflow_2lines_xs")
                for i in t:
                    title.append(i.text.split()[0])

                for i in range(0, len(title)):
                    time.sleep(1)
                    try:
                        self.click_ok()

                        if title[0] == 'Подписаться':
                            self.two()
                        elif title[0] == "Вступить":
                            self.one()

                        del title[0]

                        browser.switch_to.window(window_before)
                        self.check_ok()
                    except Exception:
                        try:
                            ost = browser.find_element(By.XPATH,"//*[contains(text(), 'ОСТАНОВЛЕНО')]")
                            ost.click()
                        except Exception:
                            return True
                    if i == 19:
                        time.sleep(random.randrange(2, 5))
                        title.clear()
                        self.auto_like_ok()
            else:
                title.clear()
                self.auto_like_ok()
        except Exception:
            title.clear()
            self.auto_like_ok()










    def click_ok(self):
        browser = self.browser
        browser.find_element(By.CSS_SELECTOR,'.btn-sm').click()
        try:
            no = WebDriverWait(browser, 2).until(
                EC.presence_of_element_located((By.XPATH, "//*[contains(text(), 'Указанного задания не существует')]")))
            no.click()
            return True
        except Exception:
            return True

    def check_ok(self):
        browser = self.browser
        time.sleep(1)
        try:
            text = WebDriverWait(browser, 10).until(
                EC.presence_of_element_located((By.CSS_SELECTOR, ".notify-message")))
            w = text
            if w.text == 'Задание успешно выполнено':
                text.click()
            elif w.text == 'Указанного задания не существует':
                text.click()
                self.delete()
            elif w.text == 'Выполнение не подтверждено, проверьте ещё раз\nНажмите на кнопку «Проверить»':
                text.click()
                self.delete()
            elif w.text == 'Задание не выполнено':
                text.click()
                self.delete()
            elif w.text == 'Вы уже выполняли данное задание':
                text.click()
                self.delete()
            else:
                text.click()
                self.delete()
        except Exception as ex:
            self.sleep()

    def delete(self):
        browser = self.browser
        time.sleep(1)

        browser.find_element(By.CSS_SELECTOR,'.btn-muted-light').click()
        del_ = WebDriverWait(browser, 2).until(
            EC.presence_of_element_located((By.CSS_SELECTOR, '.delete')))
        del_.click()

    def sleep(self):
        browser = self.browser

        ballans_ok = browser.find_element(By.ID, 'user_points_balance').text
        print('ok', ballans_ok)

        print("go to bed")
        time.sleep(60)
        
# dropdown_ac button-pro __with-arrow __arrow-svg __sec __wide  в группе ( вступить в группу)  ||  //*[@id="hook_Block_AltGroupMainMenu"]/ul/div/a  вступить
# u-menu_a toggle-dropdown  Запрос отправлен (подписаться на пользователя)                     ||            //*[@id="hook_Block_MainMenu"]/div/ul/li[1]/a  добавить в друзья

